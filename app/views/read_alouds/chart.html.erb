<%= render 'home/header' %>
<div class="read-alouds container bg-white shadow p-2">
  <div class="can-toggle">
    <input id="toggle-chart" type="checkbox" onchange="toggleCheckbox()">
    <label for="toggle-chart">
      <div class="can-toggle__switch" data-checked="Today" data-unchecked="All"></div>
      <div class="can-toggle__label-text"></div>
    </label>
  </div>

  <canvas id="allChart"></canvas>
  
  <canvas id="todayChart" class="d-none"></canvas>

  <div class="w-100 text-center mt-4">
    <%= link_to 'CONTINUE', read_alouds_path, :class => "btn bg-blue-en4all text-light", :"data-turbolinks" => false %>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script>
  var allChart;
  var todayChart;
  function toggleCheckbox() {
    var checkChart = document.getElementById("toggle-chart").checked
    if(!checkChart) {
      $("#todayChart").addClass("d-none");
      $("#allChart").removeClass("d-none");
      todayChart.destroy();
      showAllChart();
    }
    else{
      $("#allChart").addClass("d-none");
      $("#todayChart").removeClass("d-none");
      allChart.destroy();
      showTodayChart();
    }
  }

  function showTodayChart() {
    var ctx = document.getElementById('todayChart').getContext('2d');
    todayChart = new Chart(ctx, {
      // The type of chart we want to create
      type: 'bar',

      // The data for our dataset
      data: {
        labels: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10',
                 '11', '12', '13', '14', '15', '16', '17', '18', '19', '20',
                ],
        datasets: [
          // Jun
          {
            data: [50, 55, 56, 58, 60, 55, 60, 55, 54, 58, 
                   59, 53, 53, 55, 60, 65, 55, 54, 53, 52
                  ],
            backgroundColor: [
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
              'rgba(95, 192, 84, 0.2)',
            ],
            borderColor: [
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
              'rgba(95, 192, 84, 1)',
            ],
            borderWidth: 1
          }
        ]
      },
      // Configuration options go here
      options: { 
        title: {
          display: true,
          text: 'TODAY'
        },
      }
    })
  }

  function showAllChart() {
    var ctx = document.getElementById('allChart').getContext('2d');
    allChart = new Chart(ctx, {
      // The type of chart we want to create
      type: 'line',

      // The data for our dataset
      data: {
        labels: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10',
                 '11', '12', '13', '14', '15', '16', '17', '18', '19', '20',
                 '21', '22', '23', '24', '25', '26', '27', '28', '29', '30',
                 '31'],
        datasets: [
          // Jun
          {
            label: 'Jun',
            data: [50, 55, 56, 58, 60, 55, 60, 55, 54, 58, 
                   59, 53, 53, 55, 60, 65, 55, 54, 53, 52,
                   52, 55, 56, 54, 55, 58, 59, 59, 64, 59,
                   60],
            fill: false,
            borderColor: ['#ed5564']
          },
          // Feb
          {
            label: 'Feb',
            data: [60, 65, 66, 68, 60, 65, 60, 65, 64, 68, 
                   69, 63, 63, 65, 60, 65, 65, 64, 63, 56,
                   62, 65, 66, 64, 65, 68, 69, 69, 64, 69,
                   60],
            fill: false,
            borderColor: ['#ed5f55']
          },
          // Mar
          {
            label: 'Mar',
            data: [62, 67, 69, 68, 62, 67, 62, 67, 66, 68, 
                   69, 65, 65, 67, 62, 67, 67, 66, 65, 58,
                   64, 67, 68, 66, 67, 68, 69, 69, 66, 69,
                   62],
            fill: false,
            borderColor: ['#f57c4f']
          },
          // Apr
          {
            label: 'Apr',
            data: [70, 77, 79, 78, 72, 77, 72, 77, 76, 78, 
                   79, 75, 75, 77, 72, 77, 77, 76, 75, 78,
                   74, 77, 78, 76, 77, 78, 79, 79, 76, 79,
                   72],
            fill: false,
            borderColor: ['#fcce54']
          },
          // May
          {
            label: 'May',
            data: [75, 82, 84, 83, 77, 82, 77, 82, 81, 83, 
                   84, 80, 80, 82, 77, 82, 82, 81, 80, 83,
                   79, 82, 83, 81, 82, 83, 84, 84, 81, 84,
                   77],
            fill: false,
            borderColor: ['#99d468']
          },
          // Jun
          {
            label: 'Jun',
            data: [77, 82, 84, 83, 79, 82, 79, 82, 81, 83, 
                   84, 80, 80, 82, 79, 82, 82, 81, 80, 83,
                   79, 82, 83, 81, 82, 83, 84, 84, 81, 84,
                   79],
            fill: false,
            borderColor: ['#99d468']
          },
          // Jul
          {
            label: 'Jul',
            data: [87, 82, 84, 83, 89, 82, 89, 82, 81, 83, 
                   84, 80, 80, 82, 79, 82, 82, 81, 80, 83,
                   89, 82, 83, 81, 82, 83, 84, 84, 81, 84,
                   89],
            fill: false,
            borderColor: ['#41ca6e']
          },
          // Aug
          {
            label: 'Aug',
            data: [97, 92, 94, 93, 99, 92, 99, 92, 91, 93, 
                   94, 90, 90, 92, 99, 92, 92, 91, 90, 93,
                   99, 92, 93, 91, 92, 93, 94, 94, 91, 94,
                   99],
            fill: false,
            borderColor: ['#47cec0']
          },
          // Sep
          {
            label: 'Sep',
            data: [95, 87, 89, 88, 94, 87, 94, 87, 89, 88, 
                   89, 85, 85, 87, 94, 87, 87, 86, 85, 87,
                   94, 87, 88, 86, 87, 88, 89, 89, 86, 89,
                   95],
            fill: false,
            borderColor: ['#4ec2e7']
          },
          // Oct
          {
            label: 'Oct',
            data: [96, 97, 99, 98, 94, 97, 94, 97, 99, 98, 
                   99, 95, 95, 97, 94, 97, 97, 96, 95, 97,
                   94, 97, 98, 96, 97, 98, 99, 99, 96, 99,
                   95],
            fill: false,
            borderColor: ['#5c9ded']
          },
          // Nov
          {
            label: 'Nov',
            data: [100, 91, 93, 92, 98, 91, 98, 91, 93, 92, 
                   93, 89, 89, 91, 98, 91, 91, 90, 89, 91,
                   98, 91, 92, 90, 91, 92, 93, 93, 89, 93,
                   99],
            fill: false,
            borderColor: ['#9398ec']
          },
          // Dec
          {
            label: 'Dec',
            data: [99, 98, 98, 99, 97, 100, 100, 100, 100, 95, 
                   99, 99, 98, 100, 96, 99, 97, 98, 99, 99,
                   98, 100, 98, 98, 99, 100, 99, 99, 100, 97,
                   100],
            fill: false,
            borderColor: ['#cb93ee']
          }
        ]
      },

      // Configuration options go here
      options: { 
        title: {
          display: true,
          text: 'REULST FOR READ ALOUDS'
        },
        legend: {
          display: true,
          labels: {
            fontColor: 'rgb(255, 99, 132)'
          }
        }
      }
    });
  }

  $(document).ready(function() {
    showAllChart();  
  });
</script>
